# ==============================================
# SERP Tracker Backend Environment Configuration
# ==============================================

# Server Configuration
NODE_ENV=development
PORT=5000

# Database Configuration
MONGODB_URI=mongodb://localhost:27017/serp_tracker

# CORS Configuration
CORS_ORIGIN=http://localhost:3000,http://localhost:3001,http://localhost:9002

# SerpAPI Configuration
SERPAPI_KEY=
SERPAPI_DAILY_LIMIT=5000
SERPAPI_MONTHLY_LIMIT=100000
SERPAPI_ROTATION_STRATEGY=priority
SERPAPI_MAX_RETRIES=3

# ==============================================
# SerpApi Configuration (Multiple Keys Support)
# ==============================================
# Add your SerpApi keys here (supports multiple keys for load balancing)
SERPAPI_KEY_1=6b9711ef08389199c0c8fff207e208ade36b888045327fadc0cc5be7c6f8a5bc
# SERPAPI_KEY_2=your_second_serpapi_key_here  
# SERPAPI_KEY_3=your_third_serpapi_key_here

# SerpApi Limits (per key) - Free tier: 250 searches/month
SERPAPI_DAILY_LIMIT=250
SERPAPI_MONTHLY_LIMIT=250

# Individual key limits (optional - overrides global limits)
SERPAPI_DAILY_LIMIT_1=250
# SERPAPI_DAILY_LIMIT_2=250
# SERPAPI_DAILY_LIMIT_3=250

SERPAPI_MONTHLY_LIMIT_1=250
# SERPAPI_MONTHLY_LIMIT_2=250
# SERPAPI_MONTHLY_LIMIT_3=250

# SerpApi Pool Management
SERPAPI_ROTATION_STRATEGY=priority  # priority, round-robin, least-used
SERPAPI_MAX_RETRIES=3
REQUEST_TIMEOUT=30000

# ==============================================
# Rate Limiting Configuration
# ==============================================
RATE_LIMIT_WINDOW_MS=900000        # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100        # Max requests per window
SEARCH_RATE_LIMIT_WINDOW_MS=60000  # 1 minute for search endpoints
SEARCH_RATE_LIMIT_MAX_REQUESTS=20  # Max search requests per minute

# ==============================================
# Bulk Processing Configuration
# ==============================================
BULK_PROCESSING_BATCH_SIZE=5       # Keywords per batch
BULK_PROCESSING_DELAY=2000         # Delay between batches (ms)
MAX_CONCURRENT_REQUESTS=2          # Concurrent API requests
RETRY_FAILED_KEYWORDS=true         # Enable/disable retry logic
BULK_MAX_RETRIES=2                 # Max retry attempts
ADAPTIVE_DELAY=true                # Enable adaptive delay based on API usage

# ==============================================
# API Key Authentication (Optional)
# ==============================================
ENABLE_API_KEY_AUTH=false          # Set to 'true' to enable API key auth
VALID_API_KEYS=your-api-key-1,your-api-key-2

# ==============================================
# Logging Configuration
# ==============================================
LOG_LEVEL=info                     # error, warn, info, debug
ENABLE_FILE_LOGGING=false          # Enable file logging (auto-enabled in production)

# ==============================================
# Performance Tuning
# ==============================================
# Memory and performance settings
NODE_OPTIONS=--max-old-space-size=4096

# Database connection pool settings
DB_MAX_POOL_SIZE=10
DB_SERVER_SELECTION_TIMEOUT_MS=5000
DB_SOCKET_TIMEOUT_MS=45000

# ==============================================
# Development Settings
# ==============================================
# Only for development - remove in production
DEBUG=serp-tracker:*
VERBOSE_LOGGING=false

ENABLE_API_KEY_AUTH=false